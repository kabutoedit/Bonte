import Map from '../map/Map'
import Navigation from '../navigation/Navigation'
import './Footer.scss'
import { EmailType, ContactType } from '../../types'
import { useEffect, useState } from 'react'
import axios from 'axios'

export default function Footer() {
	const [loading, setLoading] = useState<boolean>(true)
	const [workTime, setWorkTime] = useState<string>('')
	const [phoneNumber, setPhoneNumber] = useState<ContactType[]>([])
	const [email, setEmail] = useState<EmailType[]>([])

	const [latitude, setLatitude] = useState<number | null>(null)
	const [longitude, setLongitude] = useState<number | null>(null)
	const [address, setAddress] = useState<string>('')

	useEffect(() => {
		async function fetchData() {
			try {
				const response = await axios.get(
					'https://back-bonte.anti-flow.com/api/v1/landing/info/'
				)

				setWorkTime(response.data.WorkTime || '')
				setEmail(response.data.email_contact || [])
				setPhoneNumber(response.data.phone_contact || [])

				setLatitude(response.data.address.latitude || null)
				setLongitude(response.data.address.longitude || null)
				setAddress(response.data.address.title || 'Адрес не указан')
			} catch (error) {
				console.error('Ошибка при получении данных:', error)
			} finally {
				setLoading(false)
			}
		}

		fetchData()
	}, [])

	if (loading) {
		return <div className='loading'>Загрузка данных...</div>
	}

	return (
		<footer id='contacts' className='Footer'>
			<Map
				latitude={latitude}
				longitude={longitude}
				address={address}
				email={email}
				phoneNumbers={phoneNumber}
			/>

			<div className='container'>
				<div className='foot'>
					<div className='logo'>
						<svg
							width='191'
							height='44'
							viewBox='0 0 191 44'
							fill='none'
							xmlns='http://www.w3.org/2000/svg'
						>
							<path
								d='M0 3.76709L3.06032 2.71886C3.8284 2.4568 5.83261 1.55051 9.07297 0H10.6571C11.0652 0 11.4252 0.0218382 11.7373 0.0655151C11.7612 0.698822 11.7732 1.13559 11.7732 1.37581L11.7373 2.71886L11.9173 15.0356L11.8813 19.7527C12.5773 19.0538 13.5014 18.3222 14.6535 17.5579C14.8935 17.405 15.5536 17.0993 16.6338 16.6407C17.7138 16.1603 18.5779 15.8545 19.226 15.7235C20.3781 15.4833 21.3983 15.3632 22.2863 15.3632C24.6625 15.3632 26.5948 15.6361 28.0829 16.1821C29.5951 16.728 31.0113 17.5906 32.3314 18.7699C33.6756 19.9274 34.8036 21.5543 35.7158 23.6507C36.2918 24.9829 36.5799 26.6098 36.5799 28.5316C36.5799 29.7764 36.3398 31.185 35.8598 32.7573C35.4037 34.3078 34.6476 35.8256 33.5915 37.3106C32.8235 38.3806 31.7313 39.4289 30.3152 40.4553C28.923 41.4817 27.3149 42.3006 25.4907 42.9121C24.2906 43.327 22.2383 43.5345 19.334 43.5345C16.6697 43.5345 13.6815 42.6391 10.3691 40.8484C9.50499 40.3679 8.88096 40.0404 8.49687 39.8657C8.01686 40.499 7.47682 41.2633 6.87672 42.1586C6.30066 43.054 5.90461 43.6437 5.68859 43.9275L3.88841 43.9603C3.88841 43.4362 3.91241 42.9012 3.96042 42.3552C4.03242 41.8092 4.06843 41.296 4.06843 40.8156L4.03242 38.3916L4.14044 37.5399C4.18844 37.1904 4.21244 36.579 4.21244 35.7055V11.7599C4.21244 9.35767 4.12843 7.79622 3.96042 7.07557C3.91241 6.8572 3.8164 6.70431 3.67238 6.61697C3.55237 6.50782 2.32824 6.0601 0 5.27392V3.76709ZM11.9892 21.6854L11.9532 26.7954C11.9532 32.4515 12.0972 35.8365 12.3853 36.9503C12.6973 38.064 13.5014 39.0358 14.7975 39.8657C16.0937 40.6737 17.4618 41.0777 18.9019 41.0777C19.9581 41.0777 21.0142 40.8811 22.0703 40.488C23.1264 40.095 23.9305 39.6582 24.4826 39.1778C25.3226 38.4571 25.9467 37.6927 26.3548 36.8847C27.0028 35.6181 27.4109 34.4607 27.5789 33.4124C27.7949 31.9711 27.9029 30.8246 27.9029 29.973C27.9029 28.1822 27.4949 26.4133 26.6788 24.6662C25.8867 22.8974 24.7586 21.5871 23.2945 20.7353C21.8543 19.8619 20.2821 19.4251 18.5779 19.4251C17.5218 19.4251 16.2737 19.6981 14.8336 20.244C13.3934 20.79 12.4453 21.2704 11.9892 21.6854ZM70.4234 19.3268C71.9595 20.6808 73.0997 22.2422 73.8435 24.0111C74.6119 25.7582 74.996 27.4069 74.996 28.9575C74.996 31.8838 74.5035 34.2423 73.5197 36.0331C72.0315 38.741 70.0273 40.7391 67.507 42.0276C64.9868 43.3161 62.0585 43.9603 58.7222 43.9603C54.9777 43.9603 51.7974 43.196 49.1811 41.6673C46.5889 40.1386 44.7287 38.4025 43.6005 36.4589C42.4964 34.5153 41.9444 32.1022 41.9444 29.2195C41.9444 27.7563 42.2084 26.2932 42.7365 24.8301C43.2645 23.345 43.9846 22.0566 44.8967 20.9647C45.8328 19.8727 46.8529 18.9555 47.957 18.2131C49.5652 17.1648 51.1733 16.4223 52.7815 15.9856C54.4137 15.527 56.3819 15.2977 58.6861 15.2977C63.7027 15.2977 67.6151 16.6407 70.4234 19.3268ZM50.7293 30.6609C50.9453 33.3688 51.1014 34.9302 51.1974 35.3451C51.5094 36.8083 52.0015 38.064 52.6735 39.1122C53.1295 39.7892 53.8856 40.3898 54.9417 40.9139C55.9979 41.438 57.258 41.7 58.7222 41.7C60.4744 41.7 61.9505 41.1977 63.1506 40.1932C64.3507 39.1668 65.2148 37.5726 65.7429 35.4106C66.0789 33.9912 66.2469 31.6654 66.2469 28.4333C66.2469 24.4588 65.5269 21.6526 64.0867 20.0147C62.6465 18.355 60.7504 17.5252 58.3981 17.5252C56.5499 17.5252 55.0138 17.9947 53.7896 18.9337C52.5895 19.8727 51.7494 21.2595 51.2693 23.0939C50.9574 24.2732 50.7773 26.7955 50.7293 30.6609ZM79.1724 41.5363C79.7962 41.2742 80.3721 41.0995 80.9008 41.0121C82.2206 40.8156 82.989 40.6518 83.205 40.5208C83.5648 40.3243 83.8045 40.084 83.9247 39.8001C84.0685 39.3634 84.1407 38.4025 84.1407 36.9175V34.0676L84.1768 31.7418L84.0685 28.3023V26.2386C84.0685 24.8628 83.949 23.7381 83.7086 22.8646C83.6128 22.537 83.3127 22.2095 82.8083 21.8819C82.1366 21.4451 80.9966 21.0193 79.3885 20.6043L79.3523 19.032C79.6642 18.9447 79.94 18.8901 80.1804 18.8682C80.4444 18.8245 81.4162 18.6061 83.0966 18.2131C84.4165 17.7763 85.2689 17.4706 85.653 17.2959C85.7732 17.2303 85.9649 17.132 86.2289 17.001C86.5172 16.7827 86.8409 16.5643 87.2008 16.3459C87.9212 15.8873 88.7853 15.0902 89.7933 13.9546L91.7016 13.8236L91.6293 17.5252C91.6057 17.8964 91.5939 18.1912 91.5939 18.4096C91.5939 18.5843 91.6057 19.0866 91.6293 19.9164C93.6217 18.3441 95.4341 17.2522 97.0658 16.6407C99.2027 15.8327 101.23 15.4287 103.151 15.4287C105.407 15.4287 107.387 15.9419 109.091 16.9683C110.795 17.9728 111.912 19.1412 112.44 20.4733C112.968 21.8055 113.232 24.4916 113.232 28.5316L113.088 39.2105C113.088 39.7128 113.184 40.1277 113.376 40.4553C113.616 40.63 114.276 40.7937 115.356 40.9466L117.12 41.2414C117.337 41.5253 117.444 41.8748 117.444 42.2897C117.444 42.5518 117.432 42.9121 117.408 43.3707L110.352 42.9121L108.263 42.9776H106.607L101.855 43.3051H100.63C100.607 43.0212 100.595 42.8029 100.595 42.65C100.595 42.2569 100.618 41.831 100.666 41.3725C101.003 41.307 101.842 41.1977 103.187 41.0449C103.546 41.0013 103.943 40.9248 104.375 40.8156C104.855 40.6409 105.131 40.4662 105.203 40.2915C105.395 39.9202 105.491 39.2105 105.491 38.1623C105.491 36.3278 105.467 34.9193 105.419 33.9366L105.455 30.1367C105.479 25.5288 105.167 22.6571 104.519 21.5215C103.607 19.8837 102.238 19.0648 100.414 19.0648C99.0707 19.0648 97.6779 19.3814 96.2378 20.0147C94.7977 20.6262 93.3098 21.5652 91.7738 22.8318L91.7016 23.3887L91.7738 25.4524L91.7377 27.6472L91.8815 32.8884L91.8092 33.7073C91.8092 37.2669 91.9656 39.276 92.2775 39.7346C92.5894 40.1932 93.778 40.6955 95.8419 41.2414C95.9141 41.6127 95.9502 41.8857 95.9502 42.0604C95.9502 42.3225 95.8662 42.7265 95.6981 43.2724C94.9541 43.2942 94.3295 43.3051 93.8259 43.3051C93.3216 43.3051 92.5296 43.2397 91.4494 43.1086L87.5975 43.0431C85.6766 43.0431 82.9049 43.1195 79.2801 43.2724C79.1842 43.054 79.1363 42.8247 79.1363 42.5845C79.1363 42.4098 79.1481 42.0604 79.1724 41.5363ZM120.576 18.3768C123.409 17.2849 125.449 16.2149 126.697 15.1667C127.969 14.1184 129.325 12.415 130.766 10.0565H132.782C132.998 10.6243 133.106 11.2248 133.106 11.8581C133.106 12.9937 133.094 13.8782 133.07 14.5115L132.962 16.4442C132.962 16.5534 132.974 16.8045 132.998 17.1976L133.826 17.2303C133.946 17.2303 135.074 17.1867 137.211 17.0993C137.379 17.0993 138.278 17.0775 139.911 17.0338C140.055 17.6235 140.127 18.1475 140.127 18.6061C140.127 19.1084 140.043 19.6981 139.875 20.375C139.083 20.4624 138.482 20.506 138.075 20.506C137.882 20.506 137.498 20.4842 136.922 20.4406H135.05L134.402 20.4078L132.674 20.4733L132.602 32.9866C132.578 35.4106 132.626 36.9284 132.746 37.5399C132.89 38.1295 133.178 38.6973 133.61 39.2432C134.162 39.4835 134.774 39.6036 135.446 39.6036C136.094 39.6036 136.574 39.549 136.886 39.4398C137.198 39.3306 137.727 39.0139 138.471 38.4898C138.614 38.3806 138.842 38.2278 139.154 38.0312C139.731 38.4462 140.199 38.8611 140.559 39.276L140.703 39.6691C139.863 40.8702 138.674 41.8202 137.138 42.519C135.626 43.196 134.006 43.5345 132.278 43.5345C130.046 43.5345 128.233 42.8902 126.841 41.6018C125.449 40.3133 124.753 38.3152 124.753 35.6072L124.897 29.8419V20.506L123.781 20.4733L121.188 20.506L120.72 20.4078C120.576 20.2113 120.505 20.0256 120.505 19.8509C120.505 19.7199 120.529 19.2285 120.576 18.3768ZM144.591 25.8455C145.215 23.9893 145.768 22.7554 146.248 22.1439C147.592 20.3532 149.019 18.9555 150.532 17.951C152.068 16.9465 153.448 16.2804 154.672 15.9528C156.256 15.5379 157.54 15.3304 158.525 15.3304C160.781 15.3304 162.605 15.4942 163.997 15.8218C165.389 16.1275 166.554 16.5752 167.489 17.1648C168.834 18.0165 169.914 18.8791 170.73 19.7527C171.546 20.6262 172.206 21.6526 172.71 22.8318C173.238 24.0111 173.526 25.4415 173.574 27.123L169.578 27.0576C168.474 27.0576 166.049 26.9593 162.305 26.7627C160.913 26.6754 159.953 26.6317 159.425 26.6317C159.257 26.6317 157.96 26.6426 155.536 26.6644H152.44C152.392 26.9702 152.368 27.2323 152.368 27.4506C152.368 28.6081 152.524 29.831 152.836 31.1195C153.148 32.3861 153.616 33.5107 154.24 34.4935C154.864 35.4543 155.632 36.2842 156.544 36.983C157.48 37.6819 158.441 38.1841 159.425 38.4898L161.513 39.1122C163.361 39.1122 164.597 39.0576 165.221 38.9485C166.374 38.7301 167.382 38.4571 168.246 38.1295C169.134 37.7801 170.202 37.2014 171.45 36.3934C172.314 36.9611 173.034 37.4744 173.61 37.933C171.498 40.0513 169.302 41.5909 167.021 42.5518C164.766 43.4908 162.233 43.9603 159.425 43.9603C157.528 43.9603 155.98 43.8074 154.78 43.5017C153.172 43.1086 151.719 42.5081 150.424 41.7C149.128 40.892 148.011 39.8875 147.076 38.6864C146.139 37.4853 145.443 36.2514 144.987 34.9848C144.387 33.3251 144.087 31.9929 144.087 30.9884C144.087 29.0885 144.255 27.3742 144.591 25.8455ZM165.51 24.4369C165.485 23.214 165.221 22.0457 164.717 20.9319C164.213 19.8182 163.433 18.9555 162.377 18.3441C161.321 17.7108 160.253 17.3941 159.173 17.3941C157.565 17.3941 156.113 18.0384 154.816 19.3268C153.52 20.6153 152.788 22.3623 152.62 24.568L160.829 24.6008C161.357 24.6008 162.101 24.568 163.061 24.5025C163.757 24.4369 164.249 24.4042 164.537 24.4042C164.753 24.4042 165.077 24.4151 165.51 24.4369ZM185.6 34.5262C187.112 34.5262 188.384 34.963 189.416 35.8365C190.472 36.71 191 37.7037 191 38.8174C191 40.2806 190.676 41.3725 190.028 42.0932C188.876 43.3379 187.484 43.9603 185.852 43.9603C184.315 43.9603 183.055 43.5126 182.071 42.6172C181.087 41.7219 180.595 40.5863 180.595 39.2105C180.595 38.3152 180.835 37.5071 181.315 36.7864C181.675 36.2187 182.395 35.6072 183.475 34.952C183.907 34.6682 184.615 34.5262 185.6 34.5262Z'
								fill='#F8D45F'
							/>
						</svg>
						<p>
							ПОСТАВКА ПИЩЕВОГО СЫРЬЯ <br /> ДЛЯ ПРОИЗВОДИТЕЛЕЙ
						</p>
					</div>
					<div className='nav'>
						<Navigation />
					</div>
					<div className='connect'>
						<h6>СВЯЗАТЬСЯ С НАМИ</h6>
						<div className='numbers'>
							{phoneNumber.map(item => {
								return <p key={item.id}>{item.title}</p>
							})}
						</div>
						{email.map(item => (
							<p key={item.id}>Почта: {item.email}</p>
						))}
					</div>

					<div className='adressAndRegime'>
						<div className='regime'>
							<h6>РЕЖИМ РАБОТЫ</h6>
							<p>{workTime}</p>
						</div>
						<div className='adress'>
							<h6>АДРЕС</h6>
							<p>{address}</p>
						</div>
					</div>
				</div>
			</div>
		</footer>
	)
}
